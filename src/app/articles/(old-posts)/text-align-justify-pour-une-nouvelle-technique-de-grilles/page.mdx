import Image from 'next/image';

import Image1 from '@/images/justify-1.jpg';
import Image2 from '@/images/justify-2.jpg';
import Image3 from '@/images/justify-3.jpg';

import MdxLayout from '@/layouts/mdx-layout';

export const metadata = {
  title: 'Text-align: justify pour une nouvelle technique de grilles',
  description: 'Une nouvelle technique CSS pour facilement cr√©er des grilles.',
  date: '2013-06-03T00:00:00Z',
};

Je suis tomb√© sur une nouvelle technique publi√©e par l‚Äôagence new-yorkaise [Barrel](http://www.barrelny.com/) pour cr√©er des grilles qui √©vitent ENFIN les prises de t√™tes que sont les marges horizontales. Je la partage aujourd‚Äôhui en fran√ßais et surtout je la conseille vivement comme m√©thode de remplacement des techniques traditionnelles.

## Les techniques habituelles

En fait quand je cr√©e des grilles, par exemple de listings produits (le plus souvent responsive), j‚Äôutilise une des deux techniques suivantes :

1. Je fais flotter tous mes blocs √† gauche √† coups de `float:left` puis j‚Äôapplique une m√©thode de [clearfix](http://nicolasgallagher.com/micro-clearfix-hack/) au bloc conteneur pour √©viter les effets annexes li√©s √† l‚Äôutilisation de mes `floats`.
2. Ou j‚Äôutilise le pseudo-s√©lecteur `nth-child` pour cibler chaque premier √©l√©ment de ma ligne de produits et supprimer sa marge gauche.

Le probl√®me de la premi√®re m√©thode, c‚Äôest qu‚Äôelle oblige √† recourir √† du clearfix, dont je ne suis pas forc√©ment fan. Elle rajoute aussi une marge (invisible) √† droite, qui risque donc de cr√©er du scolling horizontal sur des petites r√©solutions.

Le probl√®me de la deuxi√®me m√©thode, c‚Äôest qu‚Äôelle est plut√¥t p√©nible √† g√©rer de mani√®re responsive, car il faut recalculer tous les `nth-child` √† chaque changement de nombre d‚Äôitems affich√©s par ligne. Sans compter que `nth-child` n‚Äôest pas compris par IE8-.

## Text-align: justify

La technique propos√©e par Barrel est la suivante : appliquer la propri√©t√© `text-align:justify` (fonctionnant avec `inline` ET `inline-block`) au conteneur pour laisser le navigateur g√©rer tout seul les marges horizontales entre chacun des √©l√©ments d‚Äôune m√™me ligne. Par contre, le comportement par d√©faut de `text-align:justify` op√®re sur toutes les lignes d‚Äôun texte sauf la derni√®re. Si il y a une seule ligne, celle-ci sera aussi consid√©r√©e comme la derni√®re. Pour que la magie op√®re il faut donc cr√©er une "ligne" invisible situ√©e en-dessous de la ligne concern√©e (visible en bleu ci-dessous) :

<Image src={Image1} alt="Justify1" />

Pour reprendre l‚Äôexemple de Barrel il faudrait donc avoir le code suivant :

```html
<ul class="grid">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li class="break"></li>
  <ul></ul>
</ul>
```

```css
.grid {
  text-align: justify;
  font-size: 0.1px; /* supprimer l‚Äôespace entre les diff√©rents √©l√©ments */
}

.grid li {
  display: inline-block;
  width: 23%;
}

.grid .break {
  width: 100%;
  height: 0;
}
```

Ou, pour une s√©mantique plus propre, se passer de l‚Äô√©l√©ment `.break` et ajouter un `:after` au conteneur :

```css
.grid:after {
  content: '';
  display: inline-block;
  width: 100%;
}
```

Un autre souci √† contourner, c‚Äôest le nombre d‚Äô√©l√©ments par ligne. Mettons qu‚Äôon ait 4 √©l√©ments par ligne et que la derni√®re ligne n‚Äôen affiche que 2. Les 2 √©l√©ments vont se justifier sur la longueur de la ligne, donnant un r√©sultat plut√¥t ind√©sirable :

<Image src={Image2} alt="Justify2" />

Pour √©viter ce probl√®me il faudra rajouter des "placeholders" invisibles qui permettront de r√©tablir l‚Äô√©quilibre. Dans cet exemple il en faudra donc 2 pour obtenir le r√©sultat suivant :

<Image src={Image3} alt="Justify3" />

Le code ressemblera donc √† :

```html
<ul class="grid">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li class="placeholder"></li>
  <li class="placeholder"></li>
</ul>
```

La formule √† appliquer pour connaitre le nombre de placeholders √† utiliser, et ce quelque soit le nombre d‚Äôitems pr√©sents sur la derni√®re ligne, est la suivante :

```text
nombre de placeholders = nombre maximum d‚Äô√©l√©ments par ligne - 2
```

Pourquoi 2 ? Parce que si un seul produit s‚Äôaffiche sur la derni√®re ligne, il s‚Äôaffichera de toute fa√ßon tout √† gauche.

## Justify & Responsive design

L‚Äô√©norme avantage de cette technique, c‚Äôest qu‚Äôelle est tr√®s facilement adaptable au responsive design, par exemple :

```css
.grid li {
  width: 100%;
  margin-bottom: 5%;
}

@media (min-width: 400px) {
  .grid li {
    width: 48%;
    margin-bottom: 4%;
  }
}

@media (min-width: 600px) {
  .grid li {
    width: 31%;
    margin-bottom: 3%;
  }
}

@media (min-width: 800px) {
  .grid li {
    width: 23%;
    margin-bottom: 2.5%;
  }
}
```

Beaucoup plus simple et moins casse-t√™te que les `nth-child` üôÇ Par contre les marges horizontales sont calcul√©es automatiquement, il faut donc un peu t√¢tonner pour trouver les valeurs exactes √† appliquer aux `width` de nos √©l√©ments‚Ä¶

## Le support

Voil√† le gros avantage de cette m√©thode : en plus d‚Äô√™tre simple √† int√©grer, elle est compatible √† partir de IE7 (m√™me si pour celui-ci, il faudra recourir √† quelques astuces). Je l‚Äôai d√©j√† impl√©ment√©e avec succ√®s sur un projet en cours, et j‚Äôy aurai sans doute de plus en plus recours avec le temps.

<div className="info">
  Cet article a √©t√© adapt√© de
  [l‚Äôarticle](http://www.barrelny.com/blog/text-align-justify-and-rwd/)
  originalement publi√© par [Barrel](http://www.barrelny.com/). Un exemple est
  disponible sur [Codepen](http://codepen.io/patrickkunka/pen/GECBF).
</div>

export default function MdxPage({ children }) {
  return <MdxLayout metadata={metadata}>{children}</MdxLayout>;
}
